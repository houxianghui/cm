<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="stoappinfo">
  <resultMap class="com.yly.stor.Stoappinfo" id="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Mar 15 19:56:56 CST 2016.
    -->
    <result column="BatchId" jdbcType="VARCHAR" property="formNo" />
    <result column="ProjName" jdbcType="VARCHAR" property="projName" />
    <result column="ProjContNum" jdbcType="VARCHAR" property="projContNum" />
    <result column="ProdId" jdbcType="VARCHAR" property="prodId" />
    <result column="PhiTypeId" jdbcType="VARCHAR" property="phiTypeId" />
    <result column="ManufacId" jdbcType="VARCHAR" property="manufacId" />
    <result column="PurchaseAmt" jdbcType="DECIMAL" property="purchaseAmt" />
    <result column="PurchaseType" jdbcType="VARCHAR" property="purchaseType" />
    <result column="UnitPrice" jdbcType="DECIMAL" property="unitPrice" />
    <result column="OperationType" jdbcType="DECIMAL" property="operationType" />
    <result column="ExFormNo" jdbcType="VARCHAR" property="exFormNo" />
    <result column="PurchasePerson" jdbcType="VARCHAR" property="purchasePerson" />
    <result column="CurrPeriodAmt" jdbcType="DECIMAL" property="currPeriodAmt" />
    <result column="PressCardScale" jdbcType="VARCHAR" property="pressCardScale" />
    <result column="isHTCard" jdbcType="VARCHAR" property="isHTCard" />
    <result column="isPki" jdbcType="VARCHAR" property="isPki" />    
    <result column="ModuleVersion" jdbcType="VARCHAR" property="moduleVersion" />    
    <result column="ModuleBatchId" jdbcType="VARCHAR" property="moduleBatchId" />        
    <result column="OperId" jdbcType="VARCHAR" property="operId" />
    <result column="CurrDate" jdbcType="VARCHAR" property="currDate" />
    <result column="Remarks" jdbcType="VARCHAR" property="remarks" />
    <result column="Rsvd" jdbcType="VARCHAR" property="rsvd" />    
  </resultMap>
  <resultMap class="com.yly.stor.Stoappinfo" id="PosChargeBackReportMap">
    <result column="BatchId" jdbcType="VARCHAR" property="formNo" />
    <result column="PurchaseAmt" jdbcType="DECIMAL" property="purchaseAmt" />
  </resultMap>  
  
  <sql id="ibatorgenerated_Example_Where_Clause">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Thu Apr 28 15:37:13 CST 2016.
    -->
    <iterate conjunction="or" prepend="where" property="oredCriteria" removeFirstPrepend="iterate">
      <isEqual compareValue="true" property="oredCriteria[].valid">
        (
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithoutValue">
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithSingleValue">
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithListValue">
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate close=")" conjunction="," open="(" property="oredCriteria[].criteriaWithListValue[].values">
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate conjunction="and" prepend="and" property="oredCriteria[].criteriaWithBetweenValue">
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="ibatorgenerated_selectByExample" parameterClass="com.yly.stor.StoappinfoExample" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Mar 15 19:56:56 CST 2016.
    -->
    select BatchId, ProjName, ProjContNum, ProdId, PhiTypeId, ManufacId, PurchaseAmt, PurchaseType,
      UnitPrice, OperationType, ExFormNo, PurchasePerson, CurrPeriodAmt, PressCardScale, OperId,
      CurrDate,isHTCard, isPki, ModuleVersion,ModuleBatchId,Remarks, Rsvd
    from stoappinfo
    <isParameterPresent>
      <include refid="stoappinfo.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause">
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByPrimaryKey" parameterClass="com.yly.stor.Stoappinfo" resultMap="ibatorgenerated_BaseResultMap">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Mar 15 19:56:56 CST 2016.
    -->
    select BatchId, ProjName, ProjContNum, ProdId, PhiTypeId, ManufacId, PurchaseAmt, PurchaseType,
      UnitPrice, OperationType, ExFormNo, PurchasePerson, CurrPeriodAmt, PressCardScale, OperId,
      CurrDate, isHTCard, isPki,ModuleVersion,ModuleBatchId,Remarks, Rsvd
    from stoappinfo
    where BatchId = #formNo:VARCHAR#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.yly.stor.Stoappinfo">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Mar 15 19:56:56 CST 2016.
    -->
    delete from stoappinfo
    where BatchId = #formNo:VARCHAR#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="com.yly.stor.StoappinfoExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Mar 15 19:56:56 CST 2016.
    -->
    delete from stoappinfo
    <include refid="stoappinfo.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.yly.stor.Stoappinfo">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Mar 15 19:56:56 CST 2016.
    -->
    insert into stoappinfo (BatchId, ProjName, ProjContNum, ProdId, PhiTypeId, ManufacId,
      PurchaseAmt, PurchaseType, UnitPrice, OperationType, ExFormNo, PurchasePerson, CurrPeriodAmt,
      PressCardScale, OperId, CurrDate, isHTCard, isPki,ModuleVersion,ModuleBatchId,Remarks, Rsvd)
    values (#formNo:VARCHAR#, #projName:VARCHAR#, #projContNum:VARCHAR#, #prodId:VARCHAR#,
      #phiTypeId:VARCHAR#, #manufacId:VARCHAR#, #purchaseAmt:DECIMAL#, #purchaseType:VARCHAR#,
      #unitPrice:DECIMAL#, #operationType:DECIMAL#, #exFormNo:VARCHAR#, #purchasePerson:VARCHAR#,
      #currPeriodAmt:DECIMAL#, #pressCardScale:VARCHAR#, #operId:VARCHAR#, #currDate:VARCHAR#,
      #isHTCard:VARCHAR#, #isPki:VARCHAR#, #moduleVersion:VARCHAR#, #moduleBatchId:VARCHAR#,
      #remarks:VARCHAR#, #rsvd:VARCHAR#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.yly.stor.Stoappinfo">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Mar 15 19:56:56 CST 2016.
    -->
    insert into stoappinfo
    <dynamic prepend="(">
      <isNotNull prepend="," property="formNo">
        BatchId
      </isNotNull>
      <isNotNull prepend="," property="projName">
        ProjName
      </isNotNull>
      <isNotNull prepend="," property="projContNum">
        ProjContNum
      </isNotNull>
      <isNotNull prepend="," property="prodId">
        ProdId
      </isNotNull>
      <isNotNull prepend="," property="phiTypeId">
        PhiTypeId
      </isNotNull>
      <isNotNull prepend="," property="manufacId">
        ManufacId
      </isNotNull>
      <isNotNull prepend="," property="purchaseAmt">
        PurchaseAmt
      </isNotNull>
      <isNotNull prepend="," property="purchaseType">
        PurchaseType
      </isNotNull>
      <isNotNull prepend="," property="unitPrice">
        UnitPrice
      </isNotNull>
      <isNotNull prepend="," property="operationType">
        OperationType
      </isNotNull>
      <isNotNull prepend="," property="exFormNo">
        ExFormNo
      </isNotNull>
      <isNotNull prepend="," property="purchasePerson">
        PurchasePerson
      </isNotNull>
      <isNotNull prepend="," property="currPeriodAmt">
        CurrPeriodAmt
      </isNotNull>
      <isNotNull prepend="," property="pressCardScale">
        PressCardScale
      </isNotNull>
      <isNotNull prepend="," property="operId">
        OperId
      </isNotNull>
      <isNotNull prepend="," property="currDate">
        CurrDate
      </isNotNull>
      <isNotNull prepend="," property="remarks">
        Remarks
      </isNotNull>
      <isNotNull prepend="," property="rsvd">
        Rsvd
      </isNotNull>
       <isNotNull prepend="," property="isHTCard">
        isHTCard
      </isNotNull>
      <isNotNull prepend="," property="isPki">
        isPki
      </isNotNull>
      <isNotNull prepend="," property="moduleVersion">
        ModuleVersion
      </isNotNull>
  		<isNotNull prepend="," property="moduleBatchId">
        ModuleBatchId
      </isNotNull>      
      )
    </dynamic>
    values
    <dynamic prepend="(">
      <isNotNull prepend="," property="formNo">
        #formNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="projName">
        #projName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="projContNum">
        #projContNum:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="prodId">
        #prodId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="phiTypeId">
        #phiTypeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="manufacId">
        #manufacId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="purchaseAmt">
        #purchaseAmt:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="purchaseType">
        #purchaseType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="unitPrice">
        #unitPrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="operationType">
        #operationType:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="exFormNo">
        #exFormNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="purchasePerson">
        #purchasePerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="currPeriodAmt">
        #currPeriodAmt:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="pressCardScale">
        #pressCardScale:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="operId">
        #operId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="currDate">
        #currDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="remarks">
        #remarks:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="rsvd">
        #rsvd:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isHTCard">
        #isHTCard:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isPki">
        #isPki:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="moduleVersion">
        #moduleVersion:VARCHAR#
      </isNotNull>     
      <isNotNull prepend="," property="moduleBatchId">
        #moduleBatchId:VARCHAR#
      </isNotNull>           
      )
    </dynamic>
  </insert>
  <select id="ibatorgenerated_countByExample" parameterClass="com.yly.stor.StoappinfoExample" resultClass="java.lang.Integer">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Mar 15 19:56:56 CST 2016.
    -->
    select count(*) from stoappinfo
    <include refid="stoappinfo.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Mar 15 19:56:56 CST 2016.
    -->
    update stoappinfo
    <dynamic prepend="set">
      <isNotNull prepend="," property="record.formNo">
        BatchId = #record.formNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.projName">
        ProjName = #record.projName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.projContNum">
        ProjContNum = #record.projContNum:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.prodId">
        ProdId = #record.prodId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.phiTypeId">
        PhiTypeId = #record.phiTypeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.manufacId">
        ManufacId = #record.manufacId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.purchaseAmt">
        PurchaseAmt = #record.purchaseAmt:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.purchaseType">
        PurchaseType = #record.purchaseType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.unitPrice">
        UnitPrice = #record.unitPrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.operationType">
        OperationType = #record.operationType:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.exFormNo">
        ExFormNo = #record.exFormNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.purchasePerson">
        PurchasePerson = #record.purchasePerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.currPeriodAmt">
        CurrPeriodAmt = #record.currPeriodAmt:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.pressCardScale">
        PressCardScale = #record.pressCardScale:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.operId">
        OperId = #record.operId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.currDate">
        CurrDate = #record.currDate:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.remarks">
        Remarks = #record.remarks:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.rsvd">
        Rsvd = #record.rsvd:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="record.isHTCard">
        isHTCard = #record.isHTCard:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.isPki">
        isPki = #record.isPki:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.moduleVersion">
        ModuleVersion = #record.moduleVersion:VARCHAR#
      </isNotNull>
 		<isNotNull prepend="," property="record.moduleBatchId">
        ModuleBatchId = #record.moduleBatchId:VARCHAR#
      </isNotNull>      
    </dynamic>
    <isParameterPresent>
      <include refid="stoappinfo.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Mar 15 19:56:56 CST 2016.
    -->
    update stoappinfo
    set BatchId = #record.formNo:VARCHAR#,
      ProjName = #record.projName:VARCHAR#,
      ProjContNum = #record.projContNum:VARCHAR#,
      ProdId = #record.prodId:VARCHAR#,
      PhiTypeId = #record.phiTypeId:VARCHAR#,
      ManufacId = #record.manufacId:VARCHAR#,
      PurchaseAmt = #record.purchaseAmt:DECIMAL#,
      PurchaseType = #record.purchaseType:VARCHAR#,
      UnitPrice = #record.unitPrice:DECIMAL#,
      OperationType = #record.operationType:DECIMAL#,
      ExFormNo = #record.exFormNo:VARCHAR#,
      PurchasePerson = #record.purchasePerson:VARCHAR#,
      CurrPeriodAmt = #record.currPeriodAmt:DECIMAL#,
      PressCardScale = #record.pressCardScale:VARCHAR#,
      OperId = #record.operId:VARCHAR#,
      CurrDate = #record.currDate:VARCHAR#,
      isHTCard = #record.isHTCard:VARCHAR#,
      isPki = #record.isPki:VARCHAR#,
      ModuleVersion = #record.moduleVersion:VARCHAR#,
      ModuleBatchId = #record.moduleBatchId:VARCHAR#,      
      Remarks = #record.remarks:VARCHAR#,
      Rsvd = #record.rsvd:VARCHAR#
    <isParameterPresent>
      <include refid="stoappinfo.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.yly.stor.Stoappinfo">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Mar 15 19:56:56 CST 2016.
    -->
    update stoappinfo
    <dynamic prepend="set">
      <isNotNull prepend="," property="projName">
        ProjName = #projName:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="projContNum">
        ProjContNum = #projContNum:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="prodId">
        ProdId = #prodId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="phiTypeId">
        PhiTypeId = #phiTypeId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="manufacId">
        ManufacId = #manufacId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="purchaseAmt">
        PurchaseAmt = #purchaseAmt:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="purchaseType">
        PurchaseType = #purchaseType:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="unitPrice">
        UnitPrice = #unitPrice:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="operationType">
        OperationType = #operationType:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="exFormNo">
        ExFormNo = #exFormNo:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="purchasePerson">
        PurchasePerson = #purchasePerson:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="currPeriodAmt">
        CurrPeriodAmt = #currPeriodAmt:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="pressCardScale">
        PressCardScale = #pressCardScale:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="operId">
        OperId = #operId:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="currDate">
        CurrDate = #currDate:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="isHTCard">
        isHTCard = #isHTCard:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isPki">
        isPki = #isPki:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="moduleVersion">
        ModuleVersion = #moduleVersion:VARCHAR#
      </isNotNull>
       <isNotNull prepend="," property="moduleVersion">
        ModuleBatchId = #moduleBatchId:VARCHAR#
      </isNotNull>     
      <isNotNull prepend="," property="remarks">
        Remarks = #remarks:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="rsvd">
        Rsvd = #rsvd:VARCHAR#
      </isNotNull>
    </dynamic>
    where BatchId = #formNo:VARCHAR#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.yly.stor.Stoappinfo">
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Tue Mar 15 19:56:56 CST 2016.
    -->
    update stoappinfo
    set ProjName = #projName:VARCHAR#,
      ProjContNum = #projContNum:VARCHAR#,
      ProdId = #prodId:VARCHAR#,
      PhiTypeId = #phiTypeId:VARCHAR#,
      ManufacId = #manufacId:VARCHAR#,
      PurchaseAmt = #purchaseAmt:DECIMAL#,
      PurchaseType = #purchaseType:VARCHAR#,
      UnitPrice = #unitPrice:DECIMAL#,
      OperationType = #operationType:DECIMAL#,
      ExFormNo = #exFormNo:VARCHAR#,
      PurchasePerson = #purchasePerson:VARCHAR#,
      CurrPeriodAmt = #currPeriodAmt:DECIMAL#,
      PressCardScale = #pressCardScale:VARCHAR#,
      OperId = #operId:VARCHAR#,
      CurrDate = #currDate:VARCHAR#,
      isHTCard = #isHTCard:VARCHAR#,
      isPki = #isPki:VARCHAR#,
      ModuleVersion = #moduleVersion:VARCHAR#,
      ModuleBatchId = #moduleBatchId:VARCHAR#,  
      Remarks = #remarks:VARCHAR#,
      Rsvd = #rsvd:VARCHAR#
    where BatchId = #formNo:VARCHAR#
  </update>
   <select id="getReport" parameterClass="com.yly.stor.StoappinfoExample" resultMap="ibatorgenerated_BaseResultMap">
     select SUM(PurchaseAmt) AS PurchaseAmt,ProjContNum,ManufacId,ProdId,PhiTypeId,OperationType,BatchId, "" as ProjName,
      "" as ExFormNo, "" as PurchasePerson, 0 as CurrPeriodAmt, "" as PressCardScale, "" as OperId,"" as purchaseType,0 as UnitPrice,
     "" as  CurrDate,"" as isHTCard, "" as isPki,"" as  ModuleVersion,"" as ModuleBatchId,"" as Remarks, "" as Rsvd
     from stoappinfo 
    <isParameterPresent>
     	<include refid="stoappinfo.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
	 GROUP BY ProjContNum,ManufacId,ProdId,PhiTypeId,OperationType,BatchId 
  </select>
   <select id="getPosChargeBackReport" parameterClass="com.yly.stor.StoappinfoExample" resultMap="PosChargeBackReportMap">
    select lsinfo.AppNo as BatchId,sum(stoappinfo.PurchaseAmt) as PurchaseAmt  
	from  lsinfo,stoappinfo 
    <isParameterPresent>
     	<include refid="stoappinfo.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
	group by AppNo
  </select>  
</sqlMap>